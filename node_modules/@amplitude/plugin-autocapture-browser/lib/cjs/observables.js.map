{"version":3,"file":"observables.js","sourceRoot":"","sources":["../../src/observables.ts"],"names":[],"mappings":";;;AAAA,4DAAuE;AAEhE,IAAM,wBAAwB,GAAG;IACtC,OAAO,IAAI,2BAAU,CAAmB,UAAC,QAAQ;QAC/C,IAAM,gBAAgB,GAAG,IAAI,gBAAgB,CAAC,UAAC,SAAS;YACtD,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;QACH,IAAI,QAAQ,CAAC,IAAI,EAAE;YACjB,gBAAgB,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE;gBACtC,SAAS,EAAE,IAAI;gBACf,UAAU,EAAE,IAAI;gBAChB,aAAa,EAAE,IAAI;gBACnB,OAAO,EAAE,IAAI;aACd,CAAC,CAAC;SACJ;QACD,OAAO,cAAM,OAAA,gBAAgB,CAAC,UAAU,EAAE,EAA7B,CAA6B,CAAC;IAC7C,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AAfW,QAAA,wBAAwB,4BAenC;AAEF;;;GAGG;AACI,IAAM,qBAAqB,GAAG,UACnC,SAA4C;IAA5C,0BAAA,EAAA,mBAA4C;IAE5C,OAAO,IAAI,2BAAU,CAA4B,UAAC,QAAQ;;QACxD,IAAM,OAAO,GAAG,UAAC,KAAgC;YAC/C,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACvB,CAAC,CAAC;QACF,0BAA0B;QAC1B,MAAA,IAAA,+BAAc,GAAE,0CAAE,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,OAAO,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QACnF,OAAO;;YACL,0BAA0B;YAC1B,MAAA,IAAA,+BAAc,GAAE,0CAAE,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,OAAO,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QACxF,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AAdW,QAAA,qBAAqB,yBAchC","sourcesContent":["import { Observable, getGlobalScope } from '@amplitude/analytics-core';\n\nexport const createMutationObservable = (): Observable<MutationRecord[]> => {\n  return new Observable<MutationRecord[]>((observer) => {\n    const mutationObserver = new MutationObserver((mutations) => {\n      observer.next(mutations);\n    });\n    if (document.body) {\n      mutationObserver.observe(document.body, {\n        childList: true,\n        attributes: true,\n        characterData: true,\n        subtree: true,\n      });\n    }\n    return () => mutationObserver.disconnect();\n  });\n};\n\n/**\n * Creates an observable that tracks click events on the document.\n * @param clickType - The type of click event to track (click or pointerdown)\n */\nexport const createClickObservable = (\n  clickType: 'click' | 'pointerdown' = 'click',\n): Observable<MouseEvent | PointerEvent> => {\n  return new Observable<MouseEvent | PointerEvent>((observer) => {\n    const handler = (event: MouseEvent | PointerEvent) => {\n      observer.next(event);\n    };\n    /* istanbul ignore next */\n    getGlobalScope()?.document.addEventListener(clickType, handler, { capture: true });\n    return () => {\n      /* istanbul ignore next */\n      getGlobalScope()?.document.removeEventListener(clickType, handler, { capture: true });\n    };\n  });\n};\n"]}