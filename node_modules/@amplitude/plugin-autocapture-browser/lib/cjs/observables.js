"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createClickObservable = exports.createMutationObservable = void 0;
var analytics_core_1 = require("@amplitude/analytics-core");
var createMutationObservable = function () {
    return new analytics_core_1.Observable(function (observer) {
        var mutationObserver = new MutationObserver(function (mutations) {
            observer.next(mutations);
        });
        if (document.body) {
            mutationObserver.observe(document.body, {
                childList: true,
                attributes: true,
                characterData: true,
                subtree: true,
            });
        }
        return function () { return mutationObserver.disconnect(); };
    });
};
exports.createMutationObservable = createMutationObservable;
/**
 * Creates an observable that tracks click events on the document.
 * @param clickType - The type of click event to track (click or pointerdown)
 */
var createClickObservable = function (clickType) {
    if (clickType === void 0) { clickType = 'click'; }
    return new analytics_core_1.Observable(function (observer) {
        var _a;
        var handler = function (event) {
            observer.next(event);
        };
        /* istanbul ignore next */
        (_a = (0, analytics_core_1.getGlobalScope)()) === null || _a === void 0 ? void 0 : _a.document.addEventListener(clickType, handler, { capture: true });
        return function () {
            var _a;
            /* istanbul ignore next */
            (_a = (0, analytics_core_1.getGlobalScope)()) === null || _a === void 0 ? void 0 : _a.document.removeEventListener(clickType, handler, { capture: true });
        };
    });
};
exports.createClickObservable = createClickObservable;
//# sourceMappingURL=observables.js.map